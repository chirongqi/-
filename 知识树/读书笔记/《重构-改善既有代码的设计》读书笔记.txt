《重构-改善既有代码的设计》读书笔记
1.重构第一步骤：建立可靠的测试环境

2.两顶帽子：添加新功能和重构，是开发软件时经常切换的模式

3.重构的时机：最常见的重构时机就是添加新功特性的时候，一旦完成重构，新特性的添加就会更快速、更流畅

4.把未完成的重构工作（赶进度的代码）形容为“债务”，很多公司都需要借债来使自己更有效的运转。代价是需要付利息，维护和扩展的额外成本。

5.不需要做过重的预先设计，此刻只需要得到一个足够合理的解决方案，然后随着时间对业务和理解的加深，重构就好。

6.关于性能：需要先使用一个度量工具，来发现“热点” ，再修改它

 

 

重构技巧：

1.修改接口：让旧接口调用新接口。

2.打上deprecated标记

3.不要过早发布接口

 

发现坏代码的味道（哪些地方需求重构）：

1.重复代码：合并重复代码

2.过长函数：拆分成小的函数

3.过大的类：拆

4.过长参数列表：封装成对象

5.发散式的变化：代码的扩展性强

6.散弹式修改：把要修改的代码聚合在一处

7.依赖情结：代码解耦

8.数据泥团：代码抽象成对象

9.基本类型偏执：用对象，代替基本类型的组合

10.switch惊悚现身：用多态代替

......

总结：重复劳动、冗余代码